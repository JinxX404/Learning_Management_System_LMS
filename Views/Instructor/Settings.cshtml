@using Learning_Management_System.Models
@{
    ViewData["Title"] = "Instructor Settings";
    Layout = "_Layout";
    var user = ViewBag.User as User;
}

@section Styles {
    <link rel="stylesheet" href="~/css/pages/account-settings.css">
}

@await Html.PartialAsync("_InstructorNav")

<main class="container py-5" style="max-width: 896px;">
    <h1 class="page-title display-5 fw-bold mb-2">Account Settings</h1>
    <p class="page-subtitle text-secondary">Manage your notification, privacy, and account settings.</p>

    <div class="mt-5 d-flex flex-column gap-5">
        <section class="section-card card border-0 bg-tertiary shadow-sm rounded-3" aria-labelledby="profile-heading">
            <div class="card-body p-3">
                <h2 id="profile-heading" class="section-title fs-4 fw-semibold p-3">Profile Information</h2>
                @if (ViewBag.ErrorMessage != null)
                {
                    <div class="alert alert-danger mx-3">@ViewBag.ErrorMessage</div>
                }
                @if (ViewBag.SuccessMessage != null)
                {
                    <div class="alert alert-success mx-3">@ViewBag.SuccessMessage</div>
                }
                <form class="p-3" method="post" asp-action="ChangePassword" asp-controller="Instructor">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label class="form-label small text-secondary">First Name</label>
                            <input type="text" class="form-control" value="@user?.FirstName" disabled>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label small text-secondary">Last Name</label>
                            <input type="text" class="form-control" value="@user?.LastName" disabled>
                        </div>
                        <div class="col-md-12">
                            <label class="form-label small text-secondary">Current Password</label>
                            <input type="password" class="form-control" name="currentPassword" required>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label small text-secondary">New Password</label>
                            <input type="password" class="form-control" name="newPassword" required>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label small text-secondary">Confirm Password</label>
                            <input type="password" class="form-control" name="confirmPassword" required>
                        </div>
                    </div>
                    <div class="mt-4 text-end">
                        <button class="btn btn-primary fw-semibold px-4" type="submit">Save Changes</button>
                    </div>
                </form>
            </div>
        </section>

        <section class="section-card card border-0 bg-tertiary shadow-sm rounded-3" aria-labelledby="appearance-heading">
            <div class="card-body p-2">
                <h2 id="appearance-heading" class="section-title fs-4 fw-semibold p-3">Appearance</h2>
                <div class="list-group list-group-flush">
                    <div class="list-group-item bg-transparent setting-item d-flex justify-content-between align-items-center py-3">
                        <div>
                            <h3 class="mb-1 fw-medium fs-6">Dark Mode</h3>
                            <p class="text-secondary small mb-0">Toggle between light and dark theme.</p>
                        </div>
                        <button id="themeToggleBtn" 
                                class="btn btn-outline-secondary rounded-pill px-4 py-2 d-flex align-items-center gap-2"
                                type="button"
                                aria-label="Toggle theme">
                            <i id="themeIcon" class="fas fa-sun" aria-hidden="true"></i>
                            <span id="themeText" class="fw-medium">Light</span>
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </div>
</main>

@section Scripts {
    <script src="~/js/account-settings.js"></script>
}
